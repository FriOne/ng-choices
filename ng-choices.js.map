{"version":3,"file":"ng-choices.js","sources":["../out-tsc/lib/src/component/choices.component.ts","../out-tsc/lib/src/module.ts","../out-tsc/lib/ng-choices.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor } from '@angular/forms';\n\nimport Choices, { ChoicesOptions } from 'choices.js';\nimport { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nexport class ChoicesComponent implements OnInit, OnDestroy, AfterViewInit, ControlValueAccessor {\n   search: (term: string) => Observable<any[]>;\n   options: ChoicesOptions = {};\n   selectRef: ElementRef;\nprivate searchSubscription: Subscription;\nprivate choicesRef: any;\nprivate innerValue: any;\nprivate onChange = (_: any) => {};\nprivate onTouched = () => {};\n/**\n * @return {?}\n */\nngOnInit() {\n    this.options = this.options || {};\n    this.options.searchFields = this.options.searchFields || ['label', 'value'];\n    if (typeof this.options.searchFields === 'string') {\n      this.options.searchFields = [this.options.searchFields, this.options.searchFields];\n    }\n\n    if (this.search) {\n      this.options.callbackOnItemSearch = this.searchCallback;\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.choicesRef.destroy();\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    this.choicesRef = new Choices(this.selectRef.nativeElement, this.options);\n    this.choicesRef.setValue(this.value);\n    this.selectRef.nativeElement.addEventListener('change', (value: any) => (this.value = value));\n  }\n/**\n * @return {?}\n */\nget value(): any {\n    return this.innerValue;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nset value(value: any) {\n    if (this.innerValue !== value) {\n      this.innerValue = value;\n      this.onChange(value);\n    }\n  }\n/**\n * @return {?}\n */\ntouch() {\n    this.onTouched();\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any) {\n    this.innerValue = value;\n\n    if (this.choicesRef) {\n      this.choicesRef.setValue(value);\n    }\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: (value: any) => void) {\n    this.onChange = fn;\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n/**\n * @param {?} value\n * @param {?} fn\n * @param {?} passedInput\n * @return {?}\n */\nprivate searchCallback(\n    value: string,\n    fn: (results: any[], value: string, label: string) => void,\n    passedInput: string,\n  ) {\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n    const [labelField, valueField] = /** @type {?} */(( <string[]>this.options.searchFields));\n    this.searchSubscription = this\n      .search(value)\n      .subscribe(results => fn(results, valueField, labelField));\n  };\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'choices',\n  template: '<select #select></select>',\n  encapsulation: ViewEncapsulation.None,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'search': [{ type: Input },],\n'options': [{ type: Input },],\n'selectRef': [{ type: ViewChild, args: ['select', ] },],\n};\n}\n\nfunction ChoicesComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesComponent.ctorParameters;\n/** @type {?} */\nChoicesComponent.propDecorators;\n/** @type {?} */\nChoicesComponent.prototype.search;\n/** @type {?} */\nChoicesComponent.prototype.options;\n/** @type {?} */\nChoicesComponent.prototype.selectRef;\n/** @type {?} */\nChoicesComponent.prototype.searchSubscription;\n/** @type {?} */\nChoicesComponent.prototype.choicesRef;\n/** @type {?} */\nChoicesComponent.prototype.innerValue;\n/** @type {?} */\nChoicesComponent.prototype.onChange;\n/** @type {?} */\nChoicesComponent.prototype.onTouched;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\n\nimport { ChoicesComponent } from './component/choices.component';\nexport class ChoicesModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ChoicesComponent],\n  exports: [ChoicesComponent],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ChoicesModule_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ChoicesComponent,ChoicesModule} from './index';\n"],"names":[],"mappings":"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"}