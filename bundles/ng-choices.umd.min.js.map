{"version":3,"file":"ng-choices.umd.min.js","sources":["../../out-tsc/lib/src/component/choices.component.ts","../../out-tsc/lib/src/module.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor } from '@angular/forms';\n\nimport Choices, { ChoicesOptions } from 'choices.js';\nimport { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nexport class ChoicesComponent implements OnInit, OnDestroy, AfterViewInit, ControlValueAccessor {\n   search: (term: string) => Observable<any[]>;\n   options: ChoicesOptions = {};\n   selectRef: ElementRef;\nprivate searchSubscription: Subscription;\nprivate choicesRef: any;\nprivate innerValue: any;\nprivate onChange = (_: any) => {};\nprivate onTouched = () => {};\n/**\n * @return {?}\n */\nngOnInit() {\n    this.options = this.options || {};\n    this.options.searchFields = this.options.searchFields || ['label', 'value'];\n    if (typeof this.options.searchFields === 'string') {\n      this.options.searchFields = [this.options.searchFields, this.options.searchFields];\n    }\n\n    if (this.search) {\n      this.options.callbackOnItemSearch = this.searchCallback;\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.choicesRef.destroy();\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    this.choicesRef = new Choices(this.selectRef.nativeElement, this.options);\n    this.choicesRef.setValue(this.value);\n    this.selectRef.nativeElement.addEventListener('change', (value: any) => (this.value = value));\n  }\n/**\n * @return {?}\n */\nget value(): any {\n    return this.innerValue;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nset value(value: any) {\n    if (this.innerValue !== value) {\n      this.innerValue = value;\n      this.onChange(value);\n    }\n  }\n/**\n * @return {?}\n */\ntouch() {\n    this.onTouched();\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any) {\n    this.innerValue = value;\n\n    if (this.choicesRef) {\n      this.choicesRef.setValue(value);\n    }\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: (value: any) => void) {\n    this.onChange = fn;\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n/**\n * @param {?} value\n * @param {?} fn\n * @param {?} passedInput\n * @return {?}\n */\nprivate searchCallback(\n    value: string,\n    fn: (results: any[], value: string, label: string) => void,\n    passedInput: string,\n  ) {\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n    const [labelField, valueField] = /** @type {?} */(( <string[]>this.options.searchFields));\n    this.searchSubscription = this\n      .search(value)\n      .subscribe(results => fn(results, valueField, labelField));\n  };\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'choices',\n  template: '<select #select></select>',\n  encapsulation: ViewEncapsulation.None,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'search': [{ type: Input },],\n'options': [{ type: Input },],\n'selectRef': [{ type: ViewChild, args: ['select', ] },],\n};\n}\n\nfunction ChoicesComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesComponent.ctorParameters;\n/** @type {?} */\nChoicesComponent.propDecorators;\n/** @type {?} */\nChoicesComponent.prototype.search;\n/** @type {?} */\nChoicesComponent.prototype.options;\n/** @type {?} */\nChoicesComponent.prototype.selectRef;\n/** @type {?} */\nChoicesComponent.prototype.searchSubscription;\n/** @type {?} */\nChoicesComponent.prototype.choicesRef;\n/** @type {?} */\nChoicesComponent.prototype.innerValue;\n/** @type {?} */\nChoicesComponent.prototype.onChange;\n/** @type {?} */\nChoicesComponent.prototype.onTouched;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\n\nimport { ChoicesComponent } from './component/choices.component';\nexport class ChoicesModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ChoicesComponent],\n  exports: [ChoicesComponent],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ChoicesModule_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["this","_","ChoicesComponent","options","searchFields","search","callbackOnItemSearch","searchCallback","choicesRef","destroy","searchSubscription","unsubscribe","Choices","selectRef","nativeElement","setValue","value","addEventListener","_this","Object","innerValue","onChange","onTouched","fn","passedInput","_a","labelField","valueField","subscribe","results","type","Component","args","selector","template","encapsulation","ViewEncapsulation","None","Input","ViewChild","ChoicesModule","NgModule","declarations","exports"],"mappings":"yUAeA,iBAAA,aAEGA,gBAQOA,cAAW,SAAAC,KACXD,eAAY,aAkHtB,OAjHAE,qBAAA,WACIF,KACKG,QAAUH,KAAKG,YAApBH,KACKG,QAAQC,aAAeJ,KAAKG,QAAQC,eAAgB,QAAU,SAC1B,iBAA9BJ,KAAKG,QAAQC,eAAtBJ,KACKG,QAAQC,cAAeJ,KAAMG,QAAQC,aAAcJ,KAAKG,QAAQC,eAEnEJ,KACKK,SAAPL,KACKG,QAAQG,qBAAuBN,KAAKO,iBAK/CL,wBAAA,WACIF,KADKQ,WAAWC,UAGZT,KADKU,oBAEPV,KADKU,mBAAmBC,eAO9BT,4BAAA,WAAA,WACIF,KAHKQ,WAAa,IAAII,EAAQZ,KAAKa,UAAUC,cAAed,KAAKG,SAIjEH,KAHKQ,WAAWO,SAASf,KAAKgB,OAI9BhB,KAHKa,UAAUC,cAAcG,iBAAiB,SAAU,SAAAD,GAAgB,OAAAE,EAAMF,MAAQA,KAQ1FG,sBALGjB,yBAKH,WACI,OALOF,KAAKoB,gBAWhB,SARGJ,GASKhB,KARKoB,aAAeJ,IAStBhB,KARKoB,WAAaJ,EASlBhB,KARKqB,SAASL,qCAcpBd,kBAAA,WACIF,KAVKsB,aAgBTpB,uBAAA,SAbGc,GAcChB,KAbKoB,WAAaJ,EAedhB,KAbKQ,YAcPR,KAbKQ,WAAWO,SAASC,IAoB/Bd,6BAAA,SAhBGqB,GAiBCvB,KAhBKqB,SAAWE,GAsBpBrB,8BAAA,SAnBGqB,GAoBCvB,KAnBKsB,UAAYC,GAGlBrB,2BAwBH,SACIc,EACAO,EACAC,GAGIxB,KAxBKU,oBAyBPV,KAxBKU,mBAAmBC,cAEpB,IAAAc,4BAAAC,OAAaC,OAyBnB3B,KAxBKU,mBAAqBV,KAyBvBK,OAxBOW,GAyBPY,UAxBU,SAAAC,GAAW,OAAAN,EAAGM,EAASF,EAAYD,MAE7CxB,eACL4B,KAAMC,YAAWC,OAyBjBC,SAxBU,UAyBVC,SAxBU,4BAyBVC,cAxBeC,oBAAkBC,SAIlCnC,iBAAA,WAAA,UAEMA,kBA2BPG,SA1BayB,KAAMQ,UA2BnBnC,UA1Bc2B,KAAMQ,UA2BpBzB,YA1BgBiB,KAAMS,YAAWP,MAAM,+BC7GvC,cAWA,OATmCQ,eACjCV,KAAMW,WAAUT,OADhBU,cAEcxC,GADdyC,SAESzC,OAIVsC,iBAAA,WAAA"}