{"version":3,"file":"ng-choices.umd.js","sources":["../../out-tsc/lib/src/component/choices.component.ts","../../out-tsc/lib/src/module.ts","../../out-tsc/lib/ng-choices.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor } from '@angular/forms';\n\nimport Choices, { ChoicesOptions } from 'choices.js';\nimport { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nexport class ChoicesComponent implements OnInit, OnDestroy, AfterViewInit, ControlValueAccessor {\n   search: (term: string) => Observable<any[]>;\n   options: ChoicesOptions = {};\n   selectRef: ElementRef;\nprivate searchSubscription: Subscription;\nprivate choicesRef: any;\nprivate innerValue: any;\nprivate onChange = (_: any) => {};\nprivate onTouched = () => {};\n/**\n * @return {?}\n */\nngOnInit() {\n    this.options = this.options || {};\n    this.options.searchFields = this.options.searchFields || ['label', 'value'];\n    if (typeof this.options.searchFields === 'string') {\n      this.options.searchFields = [this.options.searchFields, this.options.searchFields];\n    }\n\n    if (this.search) {\n      this.options.callbackOnItemSearch = this.searchCallback;\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.choicesRef.destroy();\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    this.choicesRef = new Choices(this.selectRef.nativeElement, this.options);\n    this.choicesRef.setValue(this.value);\n    this.selectRef.nativeElement.addEventListener('change', (value: any) => (this.value = value));\n  }\n/**\n * @return {?}\n */\nget value(): any {\n    return this.innerValue;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nset value(value: any) {\n    if (this.innerValue !== value) {\n      this.innerValue = value;\n      this.onChange(value);\n    }\n  }\n/**\n * @return {?}\n */\ntouch() {\n    this.onTouched();\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any) {\n    this.innerValue = value;\n\n    if (this.choicesRef) {\n      this.choicesRef.setValue(value);\n    }\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: (value: any) => void) {\n    this.onChange = fn;\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n/**\n * @param {?} value\n * @param {?} fn\n * @param {?} passedInput\n * @return {?}\n */\nprivate searchCallback(\n    value: string,\n    fn: (results: any[], value: string, label: string) => void,\n    passedInput: string,\n  ) {\n\n    if (this.searchSubscription) {\n      this.searchSubscription.unsubscribe();\n    }\n    const [labelField, valueField] = /** @type {?} */(( <string[]>this.options.searchFields));\n    this.searchSubscription = this\n      .search(value)\n      .subscribe(results => fn(results, valueField, labelField));\n  };\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'choices',\n  template: '<select #select></select>',\n  encapsulation: ViewEncapsulation.None,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'search': [{ type: Input },],\n'options': [{ type: Input },],\n'selectRef': [{ type: ViewChild, args: ['select', ] },],\n};\n}\n\nfunction ChoicesComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesComponent.ctorParameters;\n/** @type {?} */\nChoicesComponent.propDecorators;\n/** @type {?} */\nChoicesComponent.prototype.search;\n/** @type {?} */\nChoicesComponent.prototype.options;\n/** @type {?} */\nChoicesComponent.prototype.selectRef;\n/** @type {?} */\nChoicesComponent.prototype.searchSubscription;\n/** @type {?} */\nChoicesComponent.prototype.choicesRef;\n/** @type {?} */\nChoicesComponent.prototype.innerValue;\n/** @type {?} */\nChoicesComponent.prototype.onChange;\n/** @type {?} */\nChoicesComponent.prototype.onTouched;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\n\nimport { ChoicesComponent } from './component/choices.component';\nexport class ChoicesModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ChoicesComponent],\n  exports: [ChoicesComponent],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ChoicesModule_tsickle_Closure_declarations() {\n/** @type {?} */\nChoicesModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nChoicesModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ChoicesComponent,ChoicesModule} from './index';\n"],"names":["Component","ViewEncapsulation","Input","ViewChild","NgModule"],"mappings":"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"}